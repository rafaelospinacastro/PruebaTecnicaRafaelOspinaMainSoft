@page "/CrearPersona"
@using PruebaDoubleV.Shared
<div class="container">
    <h3>Crear Persona</h3>
</div>
<div class="container contenedor-subtitle">   
        <div class="row">
            <div class="col-md-6" style="float:right;margin-right:25px;">
                <label>@mensaje</label>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <label>Nombres</label>
            </div>
            <div class="col-md-8">
                <div class="input-group input-group-sm">
                    <span style="color:red">*</span>
                    <input class="form-control form-control-sm" placeholder="Digite sus nombres" @bind-value="@persona.Nombres" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <label>Apellidos</label>
            </div>
            <div class="col-md-8">
                <div class="input-group input-group-sm">
                    <span style="color:red">*</span>
                    <input class="form-control form-control-sm" placeholder="Digite sus apellidos" @bind-value="@persona.Apellidos" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <label>Tipo de Identificación</label>
            </div>
            <div class="col-md-8">
                <div class="input-group input-group-sm">
                    <span style="color:red">*</span>
                    <input class="form-control form-control-sm" placeholder="Digite su numero Tipo de Identificación" @bind-value="@persona.TipoIdentificacion" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <label>Número de Identificación</label>
            </div>
            <div class="col-md-8">
                <div class="input-group input-group-sm">
                    <span style="color:red">*</span>
                    <input class="form-control form-control-sm" placeholder="Digite su numero de Identificación" @bind-value="@persona.NumeroIdentificacion" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <label>Correo Electrónico</label>
            </div>
            <div class="col-md-8">
                <div class="input-group input-group-sm">
                    <span style="color:red">*</span>
                    <input class="form-control form-control-sm" placeholder="Digite su email" @bind-value="@persona.Email" />
                </div>
            </div>
        </div>
        <div class="row"><br /><br /></div>
        <div class="row">
            <div class="col-md-3" style="float:right;margin-right:25px;">
                <button class="btn btn-primary btn-sm" style="float:right" @onclick="Grabar">
                    <span class="fas fa-save"></span> Guardar
                </button>
            </div>
            <div class="col-md-8">

            </div>
        </div>  
</div>
@code{

    [Inject] HttpClient Http { get; set; }
    public PersonaDTO.CrearPersona persona = new PersonaDTO.CrearPersona();
    public string mensaje = "";
    private async Task Grabar()
    {
        mensaje = "Se guardo el registro con exito";
        var devol = await Http.PostAsJsonAsync("Personas", persona);
        if(devol.IsSuccessStatusCode)
        {
            mensaje = "Se guardo el registro con exito";
        }
        else
        {
            mensaje = "Hubo un problema al guardar";
        }
    }

    protected async override void OnParametersSet()
    {

    }



}

